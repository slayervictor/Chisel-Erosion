import chisel3._
import chiseltest._
import org.scalatest.flatspec.AnyFlatSpec
import java.util

object Programs {
  val program1 = Array(
    "h00000000".U(32.W),
    "h00000000".U(32.W),
    "h00000000".U(32.W),
    "h00000000".U(32.W),
    "h00000000".U(32.W),
    "h00000000".U(32.W),
    "h00000000".U(32.W),
    "h00000000".U(32.W),
    "h00000000".U(32.W),
    "h00000000".U(32.W),
    "h00000000".U(32.W),
    "h00000000".U(32.W)
  )

  val erosion = Array(
    "b11111111111111110000000000000011".U(32.W), // li a0, -1
    "b00000000000000000000000000100011".U(32.W), // li a2, 0
    "b00000000000000000000000000010011".U(32.W), // li a1, 0
    "b00000000000000010000000000000010".U(32.W), // addi a0, a0, 1
    "b11111111111011000000000001000010".U(32.W), // addi t0, a0, -20
    "b00000000000111110000000001000110".U(32.W), // beqz t0, exit
    "b00000000000000000000001001000100".U(32.W), // lb t0, 0(a2)
    "b00000000000000000000010000110010".U(32.W), // addi a3, t0, 0
    "b00000000000111010000000001000110".U(32.W), // beqz t0, image_set_zero

    // check rows
    "b00000000000111010000000000000110".U(32.W), // beqz a0, image_set_zero
    "b11111111111011010000000001000010".U(32.W), // addi t0, a0, -19
    "b00000000000111010000000001000110".U(32.W), // beqz t0, image_set_zero

    // check columns
    "b00000000000111010000000000010110".U(32.W), // beqz a1, image_set_zero
    "b11111111111011010000000101000010".U(32.W), // addi t0, a1, -19
    "b00000000000111010000000001000110".U(32.W), // beqz t0, image_set_zero

    // right neighbor
    "b00000000000000010000001001000100".U(32.W), // lb t0, 1(a2)
    "b00000000000111010000000001000110".U(32.W), // beqz t0, image_set_zero

    // left neighbor
    "b11111111111111110000001001000100".U(32.W), // lb t0, -1(a2)
    "b00000000000111010000000001000110".U(32.W), // beqz t0, image_set_zero

    // above neighbor
    "b11111111111011000000001001000100".U(32.W), // lb t0, -20(a2)
    "b00000000000111010000000001000110".U(32.W), // beqz t0, image_set_zero

    // below neighbor
    "b00000000000101000000001001000100".U(32.W), // lb t0, 20(a2)
    "b00000000000111010000000001000110".U(32.W), // beqz t0, image_set_zero

    "b00000001100100000000001000110101".U(32.W), // sb a3, 400(a2)
    "b00000000000000010000001000100010".U(32.W), // addi a2, a2, 1
    "b00000000000000010000000100010010".U(32.W), // addi a1, a1, 1
    "b11111111111011000000000101000010".U(32.W), // addi t0, a1, -20
    "b00000000000000100000000001000110".U(
      32.W
    ), // beqz t0, outer_loop (inst. 2)
    "b00000000000001100000000000000111".U(32.W), // j inner_loop
    "b00000000000000000000000000110011".U(32.W), // li a3, 0
    "b00000000000101110000000000000111".U(32.W), // j next
    "b00000000000000000000000000001000".U(32.W) // exit
  )
}
